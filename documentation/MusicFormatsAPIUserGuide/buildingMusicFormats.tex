% !TEX root = MusicFormatsCLIUserGuide.tex

% -------------------------------------------------------------------------
\chapter{Installing MusicFormats from a repository}
% -------------------------------------------------------------------------

This is not yet possible, so you will have to build the library yourself, sorry for the delay\dots.


% -------------------------------------------------------------------------
\chapter{Building MusicFormats}
% -------------------------------------------------------------------------

In order to build \mf\ from source on your machine, you need:
\begin{itemize}
\item a C++11 compiler;
\item the \cmake\ tool.
\end{itemize}

The supported \OS s to build the library and run the \CLI\ tools are Linux, Windows and MacOS. Other systems may be fine but have not been tested.

\mf\ requires C++11 at least. More recent versions are fine.


% -------------------------------------------------------------------------
\section{Cloning the repository}
% -------------------------------------------------------------------------

Commands such as the following can be used to clone the \default\ \master\ \branch\ and \frozen\ \version\ \branch es, respectively:
\begin{lstlisting}[language=Terminal]
MUSIC_FORMATS_DIR=${HOME}/musicformats-git-dev
git clone https://github.com/jacques-menu/musicformats.git ${MUSIC_FORMATS_DIR}
cd ${MUSIC_FORMATS_DEV}
\end{lstlisting}

\begin{lstlisting}[language=Terminal]
VERSION_BRANCH=v0.9.58
MUSIC_FORMATS_DIR=${HOME}/musicformats-git-${VERSION_BRANCH}
git clone -b ${VERSION_BRANCH} https://github.com/jacques-menu/musicformats.git ${MUSIC_FORMATS_DIR}
cd ${MUSIC_FORMATS_DIR}
\end{lstlisting}


% -------------------------------------------------------------------------
\section{Running {\tt make}}
% -------------------------------------------------------------------------

Once in the local repository clone, just execute:
\begin{lstlisting}[language=Terminal]
cd build
make
\end{lstlisting}

The resulting executables are in \fileName{build/bin}:
\begin{lstlisting}[language=Terminal]
jacquesmenu@macmini: ~/musicformats-git-dev > ll build/bin
total 754368
    0 drwxr-xr-x@ 26 jacquesmenu  staff       832 Sep 27 00:05:02 2021 ./
    0 drwxr-xr-x  11 jacquesmenu  staff       352 Aug  1 18:32:54 2021 ../
72072 -rwxr-xr-x   1 jacquesmenu  staff  36899440 Sep 27 00:04:52 2021 LilyPondIssue34*
72080 -rwxr-xr-x   1 jacquesmenu  staff  36902528 Sep 27 00:04:54 2021 Mikrokosmos3Wandering*
 8504 -rwxr-xr-x   1 jacquesmenu  staff   4350480 Sep 27 00:04:49 2021 MusicAndHarmonies*
 8504 -rwxr-xr-x   1 jacquesmenu  staff   4350464 Sep 27 00:05:00 2021 RandomChords*
 8504 -rwxr-xr-x   1 jacquesmenu  staff   4350448 Sep 27 00:05:01 2021 RandomMusic*
 8696 -rwxr-xr-x   1 jacquesmenu  staff   4450928 Sep 27 00:04:56 2021 countnotes*
63904 -rwxr-xr-x   1 jacquesmenu  staff  32717248 Sep 27 00:04:57 2021 libMultipleInitsTest*
76696 -rwxr-xr-x   1 jacquesmenu  staff  39266928 Sep 27 00:05:01 2021 msdlconverter*
  144 -rwxr-xr-x   1 jacquesmenu  staff     70480 Sep 27 00:04:55 2021 musicformatsversion*
12616 -rwxr-xr-x   1 jacquesmenu  staff   6455376 Sep 27 00:04:59 2021 partsummary*
 8920 -rwxr-xr-x   1 jacquesmenu  staff   4564864 Sep 27 00:04:59 2021 readunrolled*
81048 -rwxr-xr-x   1 jacquesmenu  staff  41496208 Sep 27 00:04:49 2021 xml2Any*
61232 -rwxr-xr-x   1 jacquesmenu  staff  31347456 Sep 27 00:04:53 2021 xml2brl*
63704 -rwxr-xr-x   1 jacquesmenu  staff  32615072 Sep 27 00:04:47 2021 xml2gmn*
17368 -rwxr-xr-x   1 jacquesmenu  staff   8891744 Sep 27 00:04:56 2021 xml2guido*
63896 -rwxr-xr-x   1 jacquesmenu  staff  32713936 Sep 27 00:04:50 2021 xml2ly*
12512 -rwxr-xr-x   1 jacquesmenu  staff   6403968 Sep 27 00:04:55 2021 xml2midi*
56384 -rwxr-xr-x   1 jacquesmenu  staff  28865024 Sep 27 00:04:59 2021 xml2xml*
 9176 -rwxr-xr-x   1 jacquesmenu  staff   4695472 Sep 27 00:04:55 2021 xmlclone*
 9320 -rwxr-xr-x   1 jacquesmenu  staff   4771024 Sep 27 00:05:00 2021 xmlfactory*
 8912 -rwxr-xr-x   1 jacquesmenu  staff   4559072 Sep 27 00:04:57 2021 xmliter*
 8752 -rwxr-xr-x   1 jacquesmenu  staff   4478336 Sep 27 00:04:55 2021 xmlread*
12104 -rwxr-xr-x   1 jacquesmenu  staff   6193216 Sep 27 00:04:54 2021 xmltranspose*
 9320 -rwxr-xr-x   1 jacquesmenu  staff   4770128 Sep 27 00:05:02 2021 xmlversion*
\end{lstlisting}

The resulting librairies are in \fileName{build/bin}, here on MacOS:
\begin{lstlisting}[language=Terminal]
jacquesmenu@macmini: ~/musicformats-git-dev > ll build/lib
total 1888712
      0 drwxr-xr-x  10 jacquesmenu  staff        320 Sep 27 00:04:46 2021 ./
      0 drwxr-xr-x  11 jacquesmenu  staff        352 Aug  1 18:32:54 2021 ../
 104904 -rwxr-xr-x   1 jacquesmenu  staff   53707712 Sep 27 00:04:46 2021 libmusicxml2.3.2.0.dylib*
      0 lrwxr-xr-x   1 jacquesmenu  staff         24 Sep 27 00:04:45 2021 libmusicxml2.3.dylib@ -> libmusicxml2.3.2.0.dylib
1055040 -rw-r--r--   1 jacquesmenu  staff  532838416 Sep 27 00:04:41 2021 libmusicxml2.a
 591776 -rw-r--r--   1 jacquesmenu  staff  302989312 Sep 21 09:05:55 2021 libmusicxml2.a.A93i4n
  57056 -rw-r--r--   1 jacquesmenu  staff   29212672 Sep 21 09:01:27 2021 libmusicxml2.a.KHrJT0
  39968 -rw-r--r--   1 jacquesmenu  staff   20463616 Sep 21 09:11:20 2021 libmusicxml2.a.gZfmqe
  39968 -rw-r--r--   1 jacquesmenu  staff   20463616 Sep 21 09:09:22 2021 libmusicxml2.a.tndUAV
      0 lrwxr-xr-x   1 jacquesmenu  staff         20 Sep 27 00:04:45 2021 libmusicxml2.dylib@ -> libmusicxml2.3.dylib
\end{lstlisting}

Make sure this \code{bin} directory is in your bash \code{PATH}, and there you are.

