% !TEX root = MusicFormatsMaintainanceGuide.tex

% -------------------------------------------------------------------------
\chapter{Warning and errors (WAE)}
% -------------------------------------------------------------------------


Warning and errors in \mf\ are handled with a set of functions\index{functions} defined in the {\tt wae} folder.

class   {\tt mfException} and context-specific exceptions are defined in \wae{waeExceptions}, such as:
\begin{lstlisting}[language=CPlusPlus]
//______________________________________________________________________________
class EXP mfOahException: public mfException
{
  public:
    mfOahException (std::string const& exceptionDescription) throw ()
      : mfException (exceptionDescription)
    {}
};
typedef SMARTP<mfOahException> S_mfOahException;
\end{lstlisting}

A typical use of exceptions in \lpsrToLilypond{lpsr2lilypondInterface.cpp} is:
\begin{lstlisting}[language=CPlusPlus]
    // convert the LPSR into LilyPond code
    try {
      translateLpsrToLilypond (
        theLpsrScore,
        gGlobalMsrOahGroup,
        gGlobalLpsrOahGroup,
        passIDKind,
        passDescription,
        lilypondStandardOutputStream);
    }
    catch (lpsr2lilypondException& e) {
      mfDisplayException (e, gOutputStream);
      return;
    }
    catch (std::exception& e) {
      mfDisplayException (e, gOutputStream);
      return;
    }
\end{lstlisting}


One finds in \wae{mfEnableAbortToDebugErrorsSetting.h} the {\tt MF_ABORT_TO_DEBUG_ERRORS_IS_ENABLED} macro to help debugging the code base:
\begin{lstlisting}[language=CPlusPlus]
// comment the following definition if abort on internal errors is desired
// CAUTION: DON'T USE THIS IN PRODUCTION CODE,
// since that could kill a session on a \Web\ server, for example

#ifndef MF_ABORT_TO_DEBUG_ERRORS_IS_ENABLED
  #define MF_ABORT_TO_DEBUG_ERRORS_IS_ENABLED
#endif
\end{lstlisting}
